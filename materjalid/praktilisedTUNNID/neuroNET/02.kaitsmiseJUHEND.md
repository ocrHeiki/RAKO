# ğŸ›¡ï¸ SÃ¼steemi Kaitsmise Lihtne Juhend

See juhend annab lihtsad soovitused sÃ¼steemi kaitsmiseks samas jÃ¤rjekorras, milles rÃ¼nnakud toimusid praktikumis. Fookus on pÃµhilistel sammudel â€“ rakenda neid jÃ¤rjest, et vÃ¤hendada riske.

## 1. Privilege Escalation Kaitse (Ubuntu Server)
Privilege escalation annab root-Ãµigusi. Kaitse nii:
- **Uuenda sÃ¼steemi**: KÃ¤ivita regulaarselt uuendused, et parandada haavatavusi.
- **Piira Ãµigusi**: Ã„ra anna sudo-d tavakasutajatele; kasuta tugevaid paroole.
- **Monitoori**: Kontrolli logisid kahtlase tegevuse jaoks.

## 2. NMAP-SkÃ¤nnimise Kaitse (VÃµrgu Uurimine)
SkÃ¤nnimine paljastab avatud porte. Kaitse nii:
- **Kasuta firewalle**: Blokeeri tarbetud pordid (nt SSH port 22).
- **Uuenda ja piira**: Sulge mittevajalikud teenused; kasuta tÃ¶Ã¶riistu nagu fail2ban skÃ¤nnijate blokeerimiseks.
- **Segmenteeri vÃµrk**: Kasuta VLAN-e, et piirata juurdepÃ¤Ã¤su.

## 3. Metasploit phpMyAdmin ja Hashcat Kaitse (Andmebaasi ja Parooli RÃ¼nnakud)
Brute force ja krakkimine vÃµivad leida paroole. Kaitse nii:
- **Tugevad paroolid**: Kasuta keerulisi paroole (vÃ¤hemalt 12 tÃ¤hemÃ¤rki); Ã¤ra kasuta vaikimisi (nt "root").
- **Uuenda tarkvara**: Paigalda turvapaigad phpMyAdmin ja WordPressi jaoks.
- **Piira juurdepÃ¤Ã¤su**: Lisa CAPTCHA loginitele; kasuta MFA (mitmefaktorilist autentimist).
- **Monitoori**: Kontrolli logisid ja auditeeri paroole regulaarselt.

## 4. SSH Brute Force Kaitse (SSH Login RÃ¼nnak)
SSH rÃ¼nnakud annavad serveri juurdepÃ¤Ã¤su. Kaitse nii:
- **VÃµtme-pÃµhine login**: Keela paroolid ja kasuta SSH-vÃµtmeid.
- **Blokeeri rÃ¼nnakuid**: Paigalda fail2ban, et blokeerida IP-sid pÃ¤rast mitut katset.
- **Muuda porte**: Vaheta SSH-port vaikimisi vÃ¤Ã¤rtusest (nt 22 -> 2222).

Rakenda need sammud jÃ¤rk-jÃ¤rgult. Kui vaja, testi virtuaalses keskkonnas. See juhend on lihtne alus â€“ tÃ¤psemaks kaitseks konsulteeri ekspertidega.

## NÃ¤ited Kaitsmise Sammudest
Siin on praktilised nÃ¤ited iga kaitsmise punkti kohta. Need nÃ¤itavad "mida" teha ja "kuidas" seda terminalis vÃµi konfiguratsioonis rakendada. Kasuta neid koolitÃ¶Ã¶s vÃµi virtuaalses keskkonnas testimiseks.

### 1. Privilege Escalation NÃ¤ited
- **Mida**: Uuenda sÃ¼steemi, et sulgeda haavatavused.
  - **Kuidas**: Terminalis kÃ¤ivita `sudo apt update && sudo apt upgrade` â€“ see tÃµmbab uusimad turvapaigad.
- **Mida**: Piira sudo Ãµigusi konkreetsetele kasutajatele.
  - **Kuidas**: Ava `sudo visudo` ja lisa rida nagu `kala ALL=(ALL) NOPASSWD: ALL` (kuid eemalda see, et piirata; testi virtuaalselt).
- **Mida**: Kontrolli logisid kahtlase tegevuse jaoks.
  - **Kuidas**: Ava fail `sudo cat /var/log/auth.log` ja otsi ridu nagu "Failed password" â€“ see nÃ¤itab rÃ¼nnakuid.

### 2. NMAP-SkÃ¤nnimise NÃ¤ited
- **Mida**: Paigalda ja luba firewall, et blokeerida porte.
  - **Kuidas**: Terminalis `sudo apt install ufw`, siis `sudo ufw enable` ja `sudo ufw deny 22` (sulgeb SSH pordi).
- **Mida**: Paigalda fail2ban skÃ¤nnijate blokeerimiseks.
  - **Kuidas**: `sudo apt install fail2ban`, seejÃ¤rel kontrolli konfiguratsiooni `sudo systemctl status fail2ban` â€“ see blokeerib automaatselt IP-sid pÃ¤rast mitut skÃ¤nni.
- **Mida**: Segmenteeri vÃµrk VLAN-idega.
  - **Kuidas**: Virtuaalses ruuteris (nt pfSense) loo uus VLAN ja mÃ¤Ã¤ra see eraldi adapterile â€“ testi, kas skÃ¤nnimine ei ulatu teistesse segmentidesse.

### 3. Metasploit phpMyAdmin ja Hashcat NÃ¤ited
- **Mida**: MÃ¤Ã¤ra tugev parool andmebaasile.
  - **Kuidas**: WordPressis mine admin-paneeli ja muuda parooli keeruliseks (nt "P@ssw0rd123!"); Ã¤ra kasuta "root".
- **Mida**: Uuenda phpMyAdmin.
  - **Kuidas**: Terminalis `sudo apt update && sudo apt install phpmyadmin` â€“ see paigaldab uusima versiooni turvapaikadega.
- **Mida**: Lisa MFA WordPressi jaoks.
  - **Kuidas**: Paigalda plugin nagu "Two-Factor Authentication" WordPressi adminis ja seadista see Google Authenticatoriga â€“ testi login protsessi.
- **Mida**: Kontrolli logisid.
  - **Kuidas**: Ava `sudo cat /var/log/apache2/access.log` ja otsi IP-sid, mis proovivad phpMyAdmin lehte â€“ blokeeri need firewallis.

### 4. SSH Brute Force NÃ¤ited
- **Mida**: LÃ¼lita Ã¼le SSH-vÃµtmetele.
  - **Kuidas**: Genereeri vÃµti `ssh-keygen -t rsa`, kopeeri see serverisse `ssh-copy-id user@server` ja keela paroolid `sudo nano /etc/ssh/sshd_config` (sea `PasswordAuthentication no`), siis taaskÃ¤ivita `sudo systemctl restart ssh`.
- **Mida**: Paigalda fail2ban SSH jaoks.
  - **Kuidas**: `sudo apt install fail2ban`, seejÃ¤rel kontrolli `/etc/fail2ban/jail.local` ja lisa `[sshd]` sektsioon â€“ see blokeerib IP-sid pÃ¤rast 3 ebaÃµnnestunud katset.
- **Mida**: Muuda SSH-port.
  - **Kuidas**: Ava `sudo nano /etc/ssh/sshd_config`, muuda `Port 22` -> `Port 2222`, salvesta ja taaskÃ¤ivita `sudo systemctl restart ssh` â€“ testi Ã¼hendust uuel pordil.
